{% extends 'main/base.html' %}
{% load filters %}

{% block content %}


<form enctype="multipart/form-data" method="post" class="form-inline" role="form" action="{% url "view" %}">
{% csrf_token %}
    <div class="form-group">
        <input type="submit" value="Update" class="form-control">
    </div>
    <div class="form-group">
        <select name="field" class="form-control">
            {% for i in field_list %}
                <option value="{{i}}">{{ i }}</option>
            {% endfor %}
        </select>


        <select name="sign" class="form-control">
                <option value="exact">=</option>
                <option value="gt">></option>
                <option value="gte">>=</option>
                <option value="lt"><</option>
                <option value="lte">>=</option>
                <option value="iexact">like</option>
                <option value="icontains">contain</option>
        </select>
    </div>

    <div class="form-group">
        <label class="sr-only" for="query1">First Query</label>
        <input type="text" name="querytext" id="query1" class="form-control">

    </div>


    (
    <div class="form-group">
        <select name="joint" class="form-control">
                 <option value=""></option>
                <option value=",">AND</option>
                <option value="|">OR</option>
                <option value=",~">NOT</option>
        </select>
        

        <select name="field2" class="form-control">
            {% for i in field_list %}
                <option value="{{i}}">{{ i }}</option>
            {% endfor %}
        </select>

        <select name="sign2" class="form-control">
                <option value="exact">=</option>
                <option value="gt">></option>
                <option value="gte">>=</option>
                <option value="lt"><</option>
                <option value="lte">>=</option>
                <option value="iexact">like</option>
                <option value="icontains">contain</option>
        </select>
    </div>
    <div class="form-group">
        <input type="text" name="querytext2"  class="form-control">

    </div>
    )

</form>


<br><br>

{% if entry_list %}


<div class="alert alert-success">Found <span class="badge">{{num_entries}}</span> Entries!</div>

<ul class="pagination">
    <li class="{{pbutton_attr}}"><a href='?page=1'>First</a></li>
    <li class="{{pbutton_attr}}"><a href='?page={{prev_page}}'>Prev</a></li>
    {% for i in pages %}
    <li class="{% if i == curr_page %}active{% endif %}"><a href='?page={{i}}'>{{i}}</a></li>
    {% endfor %}
    <li class="{{pbutton_attr}}"><a href='?page={{next_page}}'>Next</a></li>
    <li class="{{pbutton_attr}}"><a href='?page={{last_page}}'>Last</a></li>
</ul>




<table class="table table-striped table-hover table-condensed table-responsive">


    <tr class="tablehead">
        {% for i in field_list %}
            <td>
                {{ i }}<br>
                (<a href='?order={{i}}'>a</a>|
                <a href='?order=-{{i}}'>d</a>)
            </td>
        {% endfor %}
    </tr>

    {% for j in entry_list %}
        <tr class="{% cycle "odd" "even" %}">
            {% for i in field_list %}
                  <td>{{ j|getattr:i }}</td>
            {% endfor %}
        </tr>
    
    {% endfor %}

</table>


<ul class="pagination">
    <li class="{{pbutton_attr}}"><a href='?page=1'>First</a></li>
    <li class="{{pbutton_attr}}"><a href='?page={{prev_page}}'>Prev</a></li>
    {% for i in pages %}
    <li class="{% if i == curr_page %}active{% endif %}"><a href='?page={{i}}'>{{i}}</a></li>
    {% endfor %}
    <li class="{{pbutton_attr}}"><a href='?page={{next_page}}'>Next</a></li>
    <li class="{{pbutton_attr}}"><a href='?page={{last_page}}'>Last</a></li>
</ul>







{% else%}

<div class="alert alert-warning">No Results Found!</div>
{% endif %}

{% endblock %}